<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Custom Pressure-Level Variables · ERA5Reanalysis.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://natgeo-wong.github.io/ERA5Reanalysis.jl/variables/pressures/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ERA5Reanalysis.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">ERA5Datasets</span><ul><li><a class="tocitem" href="../../modules/">CDS Datasets</a></li><li><a class="tocitem" href="../../modules/examples/">Usage Examples</a></li></ul></li><li><span class="tocitem">ERA5Variables</span><ul><li><a class="tocitem" href="../">Variable Types</a></li><li><a class="tocitem" href="../read/">Retrieving Existing ERA5Variables</a></li><li><a class="tocitem" href="../list/">List of Existing ERA5Variables</a></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox" checked/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">Creating Custom ERA5Variables</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Custom Pressure-Level Variables</a><ul class="internal"><li><a class="tocitem" href="#Defining-Custom-PressureLevel-Variables"><span>Defining Custom <code>PressureLevel</code> Variables</span></a></li><li><a class="tocitem" href="#Removing-Custom-PressureLevel-Variables"><span>Removing Custom <code>PressureLevel</code> Variables</span></a></li><li><a class="tocitem" href="#An-Example!"><span>An Example!</span></a></li></ul></li><li><a class="tocitem" href="../singles/">Custom Single-Level Variables</a></li><li><a class="tocitem" href="../reset/">Resetting ERA5Variables</a></li></ul></li></ul></li><li><span class="tocitem">ERA5Regions</span><ul><li><a class="tocitem" href="../../regions/">The Basics of an ERA5Region</a></li><li><a class="tocitem" href="../../regions/isin/">Is it in an ERA5Region</a></li><li><a class="tocitem" href="../../regions/gridded/">Extracting Data using ERA5Regions</a></li></ul></li><li><span class="tocitem">Downloading ERA5 Data</span><ul><li><a class="tocitem" href="../../downloads/cdsapi/">The CDSAPI</a></li><li><a class="tocitem" href="../../downloads/julia/">Downloading with Julia</a></li><li><a class="tocitem" href="../../downloads/python/">Downloading with Python</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">ERA5Variables</a></li><li><a class="is-disabled">Creating Custom ERA5Variables</a></li><li class="is-active"><a href>Custom Pressure-Level Variables</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Custom Pressure-Level Variables</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/natgeo-wong/ERA5Reanalysis.jl/blob/main/docs/src/variables/pressures.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Custom-PressureLevel-variables"><a class="docs-heading-anchor" href="#Custom-PressureLevel-variables">Custom <code>PressureLevel</code> variables</a><a id="Custom-PressureLevel-variables-1"></a><a class="docs-heading-anchor-permalink" href="#Custom-PressureLevel-variables" title="Permalink"></a></h1><p>In ERA5Reanalysis.jl, we have predefined all the pressure-level variables that are available directly from the CDS.  As such, all custom <code>PressureLevel</code> variables are defined under the <code>PressureCustom</code> type.</p><h2 id="Defining-Custom-PressureLevel-Variables"><a class="docs-heading-anchor" href="#Defining-Custom-PressureLevel-Variables">Defining Custom <code>PressureLevel</code> Variables</a><a id="Defining-Custom-PressureLevel-Variables-1"></a><a class="docs-heading-anchor-permalink" href="#Defining-Custom-PressureLevel-Variables" title="Permalink"></a></h2><p><code>PressureCustom</code> variables are defined using the <code>PressureVariable()</code> function, as follows:</p><article class="docstring"><header><a class="docstring-binding" id="ERA5Reanalysis.PressureVariable" href="#ERA5Reanalysis.PressureVariable"><code>ERA5Reanalysis.PressureVariable</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">PressureVariable(
    ST = String;
    varID :: AbstractString,
    lname :: AbstractString = &quot;&quot;,
    vname :: AbstractString,
    units :: AbstractString,
    hPa   :: Int = 0,
    throw :: Bool = true
) -&gt; evar :: PressureCustom</code></pre><p>Create a custom Pressure-Level variable that is not in the default list exported by ERA5Reanalysis.jl.  These variables are not available in the CDS store, and so they must be separately calculated from other variables and analyzed.</p><p><strong>Keyword Arguments</strong></p><ul><li><code>varID</code> : variable ID (in string format) used in the NetCDF file</li><li><code>lname</code> : long-name for variable (used in specifying variable for CDS downloads)</li><li><code>vname</code> : user-defined variable name</li><li><code>units</code> : user-defined units of the variable</li><li><code>hPa</code>   : Pressure level specified in hPa. Default is 0, which indicates all levels.</li><li><code>throw</code> : if <code>hPa</code> level does not exist and <code>throw</code> is true, throw error, otherwise find nearest pressure level</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/natgeo-wong/ERA5Reanalysis.jl/blob/aa19dfbdae325d977a109f8b34db8816ab213778/src/variable/pressure.jl#L108-L130">source</a></section></article><h2 id="Removing-Custom-PressureLevel-Variables"><a class="docs-heading-anchor" href="#Removing-Custom-PressureLevel-Variables">Removing Custom <code>PressureLevel</code> Variables</a><a id="Removing-Custom-PressureLevel-Variables-1"></a><a class="docs-heading-anchor-permalink" href="#Removing-Custom-PressureLevel-Variables" title="Permalink"></a></h2><p>To remove a <code>PressureCustom</code> variable, we can use the <code>rmPressure()</code> function:</p><article class="docstring"><header><a class="docstring-binding" id="ERA5Reanalysis.rmPressure-Tuple{AbstractString}" href="#ERA5Reanalysis.rmPressure-Tuple{AbstractString}"><code>ERA5Reanalysis.rmPressure</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">rmPressure( varID :: AbstractString ) -&gt; nothing</code></pre><p>Remove the Pressure-Level Variable with the ID <code>varID</code> from the lists.</p><p><strong>Arguments</strong></p><ul><li><code>RegID</code> : The keyword ID that will be used to identify the Pressure-Level Variable that is to be removed</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/natgeo-wong/ERA5Reanalysis.jl/blob/aa19dfbdae325d977a109f8b34db8816ab213778/src/variable/pressure.jl#L248-L257">source</a></section></article><h2 id="An-Example!"><a class="docs-heading-anchor" href="#An-Example!">An Example!</a><a id="An-Example!-1"></a><a class="docs-heading-anchor-permalink" href="#An-Example!" title="Permalink"></a></h2><p>Let us define the custom variable &quot;vt&quot; for Virtual Temperature, which is a proxy to buoyancy in the atmosphere.  Virtual Temperature is calculated from both the water vapour mixing ratio and atmospheric temperature and is given by the formula:</p><p class="math-container">\[T_v = T(1+0.61q)\]</p><p>Virtual Temperature has the units &quot;K&quot;, and for this example let us define the pressure level height we are interested in to be at 1000 hPa.  The resultant <code>PressureCustom</code> variable is given by:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using ERA5Reanalysis</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; PressureVariable(
           varID = &quot;vt&quot;,
           units = &quot;K&quot;,
           hPa   = 1000,
           lname = &quot;virtual_temperature&quot;,
           vname = &quot;Virtual Temperature&quot;
       )</code><code class="nohighlight hljs ansi" style="display:block;">┌ Warning: 2022-11-01T04:31:13.741 - ERA5Reanalysis.jl - &quot;vt&quot; is not a valid PressureVariable identifier, use the function PressureCustom() to add this ERA5Variable to the list.
└ @ ERA5Reanalysis ~/work/ERA5Reanalysis.jl/ERA5Reanalysis.jl/src/variable/pressure.jl:236
[ Info: 2022-11-01T04:31:13.741 - ERA5Reanalysis.jl - Adding the PressureVariable &quot;vt&quot; to the list.
The Pressure-Level Variable &quot;vt&quot; has the following properties:
    Variable ID    (varID) : vt
    Long Name      (lname) : virtual_temperature
    Variable Name  (vname) : Virtual Temperature
    Variable Units (units) : K
    Pressure Level  (hPa)  : 1000</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; tablePressures()</code><code class="nohighlight hljs ansi" style="display:block;"> ------------------ ------ ------------------------------------- ---------------------- -------------------------------------
   Variable Type      ID    Name                                         Units           ERA5 Long-Name
 ------------------ ------ ------------------------------------- ---------------------- -------------------------------------
  PressureVariable    u     Zonal Wind                                  m s**-1          u_component_of_wind
  PressureVariable    v     Meridional Wind                             m s**-1          v_component_of_wind
  PressureVariable    w     Vertical Wind                               Pa s**-1         lagrangian_tendency_of_air_pressure
  PressureVariable    t     Temperature                                    K             temperature
  PressureVariable    z     Pressure Level Geopotential                m**2 s**-2        geopotential
  PressureVariable    d     Divergence                                   s**-1           divergence
  PressureVariable    vo    Vorticity (Relative)                         s**-1           vorticity
  PressureVariable    pv    Potential Vorticity                   K m**-2 kg**-1 s**-1   potential_vorticity
  PressureVariable    r     Relative Humidity                              %             relative_humidity
  PressureVariable    q     Specific Humidity                          kg kg**-1         specific_humidity
  PressureVariable    cc    Cloud Cover Fraction                           %             fraction_of_cloud_cover
  PressureVariable   ciwc   Specific Cloud Ice Water Content           kg kg**-1         specific_cloud_ice_water_content
  PressureVariable   clwc   Specific Cloud Liquid Water Content        kg kg**-1         specific_cloud_liquid_water_content
  PressureVariable   crwc   Specific Rain Water Content                kg kg**-1         specific_rain_water_content
  PressureVariable   cswc   Specific Snow Water Contnet                kg kg**-1         specific_snow_water_content
  PressureVariable    o3    Ozone Mass Mixing Ration                   kg kg**-1         ozone_mass_mixing_ratio
   PressureCustom     vt    Virtual Temperature                            K             virtual_temperature
 ------------------ ------ ------------------------------------- ---------------------- -------------------------------------</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; rmPressure(&quot;vt&quot;)</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: UndefKeywordError: keyword argument hPa not assigned</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; isPressure(&quot;vt&quot;,throw=false) # don&#39;t throw error, just show warning</code><code class="nohighlight hljs ansi" style="display:block;">true</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../list/">« List of Existing ERA5Variables</a><a class="docs-footer-nextpage" href="../singles/">Custom Single-Level Variables »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Tuesday 1 November 2022 04:31">Tuesday 1 November 2022</span>. Using Julia version 1.8.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
