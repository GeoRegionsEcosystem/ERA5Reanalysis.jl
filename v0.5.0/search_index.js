var documenterSearchIndex = {"docs":
[{"location":"components/datasets/define.html#ERA5Dataset-Examples","page":"Defining ERA5 Datasets","title":"ERA5Dataset Examples","text":"Here, we list some basic examples for the creation of ERA5Dataset","category":"section"},{"location":"components/datasets/define.html#Specifying-an-hourly-dataset:","page":"Defining ERA5 Datasets","title":"Specifying an hourly dataset:","text":"using ERA5Reanalysis\nERA5Hourly(start=Date(2017,1,2),stop=Date(2018,5,1))\n\nNote that the resultant ERA5Hourly dataset processes data by whole-months.  It is not possible to specify specific days in which to download data.","category":"section"},{"location":"components/datasets/define.html#Specifying-a-monthly-dataset-with-custom-home-directory:","page":"Defining ERA5 Datasets","title":"Specifying a monthly dataset with custom home directory:","text":"using ERA5Reanalysis\nERA5Monthly(start=Date(2017,1,2),stop=Date(2018,5,1),path=pwd())\n\nNote that the resultant ERA5Monthly dataset processes data by years.  It is not possible to specify specific months in which to download data.  The same holds true for the ERA5MonthlyHour dataset.","category":"section"},{"location":"components/datasets/define.html#Specifying-a-monthly-hour-dataset:","page":"Defining ERA5 Datasets","title":"Specifying a monthly-hour dataset:","text":"using ERA5Reanalysis\nERA5Monthly(start=Date(2017,1,2),stop=Date(2018,5,1),hours=[0,3,6,9,12,15,18,21])","category":"section"},{"location":"components/variables/list.html#List-of-Predefined-ERA5Variables-in-ERA5Reanalysis.jl","page":"Predefined ERA5 Variables","title":"List of Predefined ERA5Variables in ERA5Reanalysis.jl","text":"In order to see a list of existing ERA5Variables, we can use the function tableERA5Variables().  Alternatively, if we only want to see SingleLevel or PressureLevel variables, we can use tableSingles() or tablePressures()\n\ncompat: ERA5Reanalysis ≧ v0.3\nAll Single-Level variables defined in the Climate Data Store are now available in ERA5Reanalysis.jl, but only for versions ≧ v0.3. Otherwise, a small subset of the Single-Level variables are available, but the rest need to be user-defined.","category":"section"},{"location":"components/variables/list.html#List-of-Predefined-Single-Level-Variables","page":"Predefined ERA5 Variables","title":"List of Predefined Single-Level Variables","text":"using ERA5Reanalysis\ntableSingles()","category":"section"},{"location":"components/variables/list.html#List-of-Predefined-Pressure-Level-Variables","page":"Predefined ERA5 Variables","title":"List of Predefined Pressure-Level Variables","text":"using ERA5Reanalysis\ntablePressures()","category":"section"},{"location":"components/regions/index.html#An-Introduction-to-ERA5Regions","page":"What is an ERA5Region","title":"An Introduction to ERA5Regions","text":"","category":"section"},{"location":"components/regions/index.html#What-is-an-ERA5Region-and-why-do-we-need-it?","page":"What is an ERA5Region","title":"What is an ERA5Region and why do we need it?","text":"By default, ERA5Reanalysis.jl will conduct downloads, or analyse data over, the entire globe.  However, most of the time we would rather perform these tasks over specified regions of interest.  In ERA5Reanalysis, we do this by specifying an ERA5Region, which is built on top of the GeoRegion functionality in GeoRegions.jl.\n\nnote: Why not just use `GeoRegion`s directly?\nThe functionality of ERA5Regions and the basic manipulations are very similar to those of GeoRegions.  However, in ERA5Reanalysis.jl, we must additionally specify the resolution of the data that needs to be downloaded and/or analyzed, and therefore we build an ERA5Region as a container of a GeoRegion.\n\nThe package GeoRegions.jl is automatically reexported by ERA5Reanalysis.jl, so one can define or retrieve a GeoRegion and its information directly without needing to explicitly call GeoRegions.jl in the REPL.  Once a GeoRegion has been retrieved, we can use it to define an ERA5Region, which will also contain information on the horizontal resolution at which the dataset will be downloaded/analyzed.","category":"section"},{"location":"components/regions/index.html#Basic-Example","page":"What is an ERA5Region","title":"Basic Example","text":"Here, we define ERA5Regions that cover the same domain based on the same GeoRegion, GF_WAF, but using different spatial resolution.  We see that gres = 1.3 is not a valid resolution, because 360 then is not a multiple of gres.\n\nusing ERA5Reanalysis\n\ngeo   = GeoRegion(\"AR6_SEA\")\negeo1 = ERA5Region(geo)\negeo2 = ERA5Region(geo,resolution=1.0)\negeo3 = ERA5Region(geo,resolution=1.3)","category":"section"},{"location":"components/regions/index.html#ERA5Reanalysis.ERA5Region","page":"What is an ERA5Region","title":"ERA5Reanalysis.ERA5Region","text":"ERA5Region\n\nAbstract supertype for ERA5 Regions, with the following subtypes\n\nERA5LonLatGrid <: ERA5Region\nERA5NativeGrid <: ERA5Region\n\nAll ERA5Region Types contain the following fields:\n\ngeo : The GeoRegion containing the geographical information\nID : The ID used to specify the GeoRegion\nresolution : The resolution of the gridded data to be downloaded/analysed\nstring : Specification of folder and file name, mostly for backend usage\nisglb : A Bool, true if spans the globe, false if no\nis360 : True if it spans 360º longitude\n\n\n\n\n\n","category":"type"},{"location":"components/regions/index.html#ERA5Reanalysis.ERA5Region-Tuple{GeoRegion}","page":"What is an ERA5Region","title":"ERA5Reanalysis.ERA5Region","text":"ERA5Region(\n    geo :: GeoRegion;\n    resolution :: Real = 0,\n    ST = String,\n    FT = Float64\n) -> ereg :: ERA5Region\n\nArgument\n\ngeo  : A GeoRegion structure type\n\nKeyword Argument\n\nresolution : The spatial resolution that ERA5 reanalysis data will be downloaded/analyzed, and 360 must be a multiple of resolution\n\n\n\n\n\n","category":"method"},{"location":"using/download.html#An-Overview-of-the-Download-Functionality","page":"Downloading and Reading Data","title":"An Overview of the Download Functionality","text":"The download functionality of ERA5Reanalysis.jl is built upon a Julia version of the CDSAPI (see here and here).  In ERA5Reanalysis.jl, downloading a dataset can be as easy as\n\ndownload(\n    <ERA5Dataset>,\n    <ERA5Variable>,\n    <ERA5Region>,\n    kwargs...\n)\n\nSee below for the different examples and methods.  Note that downloading a PressureVariable is a bit more complicated and involved than downloading a SingleVariable because we need to also specify the range of pressures to download the data from the CDS when a PressureVariable is chosen.","category":"section"},{"location":"using/download.html#Setting-up-the-CDSAPI-Key","page":"Downloading and Reading Data","title":"Setting up the CDSAPI Key","text":"In order for your downloads to work with ERA5Reanalysis, you first need to set up your CDSAPI key.  To do this, you must first register with the Climate Data Store in order to obtain your key here.\n\nThen, you can either follow the instructions above in the API-how-to, or you can simply use the function addCDSAPIkey() to do it for you if you don't want to fiddle around with hidden files and the like.\n\nSo, example\n\nusing ERA5Reanalysis\nckeys = ERA5Reanalysis.cdskey()\naddCDSAPIkey(\"<your-key-here>\")\n\nSee the API below for more details.","category":"section"},{"location":"using/download.html#Examples","page":"Downloading and Reading Data","title":"Examples","text":"The following is the most basic download example\n\nusing ERA5Reanalysis\ne5ds = ERA5Hourly(start=Date(2015),stop=Date(2015))\nevar = SingleVariable(\"t2m\")\negeo = ERA5Region(\"AR6_SEA\")\ndownload(e5ds,evar,egeo)\n\nThe following downloads pressure-level data between 500 hPa and 600 hPa (note, we must specify that the keyword argument pall is true.)\n\nusing ERA5Reanalysis\ne5ds = ERA5Hourly(start=Date(2015),stop=Date(2015))\nevar = PressureVariable(\"cc\")\negeo = ERA5Region(\"AR6_SEA\")\ndownload(e5ds,evar,egeo,pall=true,ptop=500,pbot=600)","category":"section"},{"location":"using/download.html#TL;DR","page":"Downloading and Reading Data","title":"TL;DR","text":"The backend download functionality of ERA5Reanalysis.jl are based upon the build of CDSAPI.jl, but with the following extensions:\n\nEliminates the need to know the CDSAPI syntax for the frontend - all you need is to specify the Dataset, Variable and Region of interest\nExtracts and places the downloaded data in a patterned, organized and systematic manner for easy retrieval\nMore detailed and organized logging information during the downloading process similar to the python version of CDSAPI\nAllowing for repeated (up to 20) attempts at downloading a specific set of data\n\nHowever, the download functionality of ERA5Reanalysis.jl is also limited in several ways:\n\nIt currently only is able to download the reanalysis data, not ensemble members\nIt currently is unable to retrieve any dataset outside the ERA5 Reanalysis datasets, including ERA5-Land data\nIt is not possible to specify multiple Pressure-Level variables for download in the same manner as Single-Level variables","category":"section"},{"location":"using/download.html#API","page":"Downloading and Reading Data","title":"API","text":"","category":"section"},{"location":"using/download.html#ERA5Reanalysis.addCDSAPIkey","page":"Downloading and Reading Data","title":"ERA5Reanalysis.addCDSAPIkey","text":"addCDSAPIkey(\n    key :: AbstractString;\n    url :: AbstractString = \"https://cds.climate.copernicus.eu/api/v2\",\n    filename  :: AbstractString = \".cdsapirc\",\n    overwrite :: Bool = false\n) -> nothing\n\nAdds the user's CDSAPI key to a file in the homedir() (by default specified as .cdsapirc)\n\nArguments\n\nkey : The user's CDSAPI key\n\nKeyword Arguments\n\nurl : The user's CDSAPI key\nfilename  : The name of the file the url and key are saved to in the homedir()\noverwrite : If true and if filename already exists, then overwrite\n\n\n\n\n\n","category":"function"},{"location":"using/download.html#Base.download-Tuple{Union{ERA5Hourly, ERA5Monthly}, SingleVariable, ERA5Region}","page":"Downloading and Reading Data","title":"Base.download","text":"download(\n    e5ds :: Union{ERA5Hourly,ERA5Monthly},\n    evar :: SingleVariable,\n    ereg :: ERA5Region;\n    ispy :: Bool = false,\n    overwrite :: Bool = false\n) -> nothing\n\nDownloads ERA5 data from the CDS datastore for a specified Single-Level variable and geographic region.  You can specify to download via python scripts generated by selecting ispy to true, or to instead use Julia directly.\n\nYou must have installed the CDSAPI on your machine and have accepted the terms and conditions on the CDS website in order for this to work.\n\nArguments\n\ne5ds : The ERA5Dataset specified (Hourly or Monthly)\ne5ds.start defines the start date\ne5ds.stop defines the end date\ne5ds.path defines the path to which all reanalysis data is saved\nevar : Specifies the Single-Level variable to be downloaded\nereg : Specifies the GeoRegion and the resolution of the data to be downloaded\nipsy : Specifies whether to generate a python script that can be used to download the data instead of Julia\noverwrite : false by default. If set to true, existing data will be overwritten.\n\n\n\n\n\n","category":"method"},{"location":"using/download.html#Base.download-Tuple{Union{ERA5Hourly, ERA5Monthly}, PressureVariable, ERA5Region}","page":"Downloading and Reading Data","title":"Base.download","text":"download(\n    e5ds :: Union{ERA5Hourly,ERA5Monthly},\n    evar :: PressureVariable,\n    ereg :: ERA5Region;\n    ispy :: Bool = false,\n    pall :: Bool = false,\n    ptop :: Int = 0,\n    pbot :: Int = 0,\n    pvec :: Vector{Int} = [0],\n    overwrite :: Bool = false\n) -> nothing\n\nDownloads ERA5 data from the CDS datastore for a specified Pressure-Level variable and geographic region.  You can choose to specify (1) one pressure level, (2) a vector of pressure levels or (3) a set of pressure levels defined by their top and bottom levels.  A python option is also available, but this will generate python scripts for all pressure levels.\n\nYou must have installed the CDSAPI on your machine and have accepted the terms and conditions on the CDS website in order for this to work.\n\nArguments\n\ne5ds : The ERA5Dataset specified (Hourly or Monthly)\ne5ds.start defines the start date\ne5ds.stop defines the end date\ne5ds.path defines the path to which all reanalysis data is saved\nevar : Specifies a Pressure-Level variable to be downloaded. By default (if pall is not selected), then the pressure level closest to what is specified in evar.hPa will be downloaded.\nereg : Specifies the GeoRegion and the resolution of the data to be downloaded\nipsy : Specifies whether to generate a python script that can be used to download the data instead of Julia. If true, scripts for all pressure levels will be generated\npall : Indicates that we are selecting a range of pressure levels to be downloaded at the same time.\nptop : Indicates the pressure level at the top layer. ptop must be < pbot\npbot : Indicates the pressure level at the bottom layer. pbot must be > ptop\npvec : Defines a set of pressure levels to download. Overrides ptop and pbot\noverwrite : false by default. If set to true, existing data will be overwritten.\n\n\n\n\n\n","category":"method"},{"location":"components/variables/index.html#Variable-Types-in-ERA5Reanalysis.jl","page":"What is an ERA5 Variable","title":"Variable Types in ERA5Reanalysis.jl","text":"In order to download data from the Climate Data Store, we need to specify at least a variable to download.  This variable can be one found directly from CDS, or it can be a custom user-defined variable (in which case it has to be calculated by the user).  Information regarding this variable will be loaded into an ERA5Variable.","category":"section"},{"location":"components/variables/index.html#SingleLevel-and-PressureLevel-variables","page":"What is an ERA5 Variable","title":"SingleLevel and PressureLevel variables","text":"There are two main ERA5Variable types in ERA5 reanalysis:\n\nSingleLevel variables, such as surface temperature, or total cloud cover, that are provided in the (lon,lat) space\nPressureLevel variables, such as atmospheric temperature, or specific humidity, that are provided in the (lon,lat,pressure) space","category":"section"},{"location":"components/variables/index.html#Custom-ERA5Variables","page":"What is an ERA5 Variable","title":"Custom ERA5Variables","text":"Each of these supertypes are further broken down into XXVariable and XXCustom subtypes, where XXVariable represents a variable that is available directly from CDS, and XXCustom variables are user-defined variables. XXCustom variables therefore cannot be downloaded - trying to do so will result in a method error - and can only be calculated from existing variable data.","category":"section"},{"location":"components/variables/index.html#ERA5Reanalysis.ERA5Variable","page":"What is an ERA5 Variable","title":"ERA5Reanalysis.ERA5Variable","text":"ERA5Variable\n\nAbstract supertype for ERA5 variables, with the following subtypes\n\nSingleLevel   <: ERA5Variable\nPressureLevel <: ERA5Variable\n\nAll ERA5Variable Types contain the following fields:\n\nID : The variable ID, that is also the identifier in the NetCDF files\nname : The full-name of the variable\nlong : The variable long-name, which is used to specify retrievals from CDS\ndataset : The full-name of the variable\nunits : The units of the variable\n\nAll PressureLevel Types contain the following fields:\n\nhPa : The pressure level (in hPa) of the pressure-variable of interest\n\n\n\n\n\n","category":"type"},{"location":"components/variables/index.html#ERA5Reanalysis.SingleLevel","page":"What is an ERA5 Variable","title":"ERA5Reanalysis.SingleLevel","text":"SingleLevel <: ERA5Variable\n\nAbstract supertype for Single-Level variables, with the following subtypes:\n\nSingleVariable <: SingleLevel\nSingleCustom   <: SingleLevel\n\n\n\n\n\n","category":"type"},{"location":"components/variables/index.html#ERA5Reanalysis.PressureLevel","page":"What is an ERA5 Variable","title":"ERA5Reanalysis.PressureLevel","text":"PressureLevel <: ERA5Variable\n\nAbstract supertype for Single-Level variables, with the following subtypes:\n\nPressureVariable <: PressureLevel\nPressureCustom   <: PressureLevel\n\n\n\n\n\n","category":"type"},{"location":"components/variables/index.html#ERA5Reanalysis.SingleVariable","page":"What is an ERA5 Variable","title":"ERA5Reanalysis.SingleVariable","text":"SingleVariable <: SingleLevel\n\nSubtype for Single-Level variables that can be directly retrieved from the Climate Data Store.\n\n\n\n\n\n","category":"type"},{"location":"components/variables/index.html#ERA5Reanalysis.SingleCustom","page":"What is an ERA5 Variable","title":"ERA5Reanalysis.SingleCustom","text":"SingleCustom <: SingleLevel\n\nSubtype for custom user-defined Single-Level variables, which can only be calculated and not downloaded from the Climate Data Store.\n\n\n\n\n\n","category":"type"},{"location":"components/variables/index.html#ERA5Reanalysis.PressureVariable","page":"What is an ERA5 Variable","title":"ERA5Reanalysis.PressureVariable","text":"PressureVariable <: PressureLevel\n\nSubtype for Pressure-Level variables that can be directly retrieved from the Climate Data Store.\n\n\n\n\n\n","category":"type"},{"location":"components/variables/index.html#ERA5Reanalysis.PressureCustom","page":"What is an ERA5 Variable","title":"ERA5Reanalysis.PressureCustom","text":"PressureCustom <: PressureLevel\n\nSubtype for custom user-defined Pressure-Level variables which can only be calculated and not downloaded from the Climate Data Store.\n\n\n\n\n\n","category":"type"},{"location":"components/variables/reset.html#Resetting-the-ERA5Variable-Lists","page":"Resetting ERA5 Variables","title":"Resetting the ERA5Variable Lists","text":"We can reset the list of ERA5Variables back to the default predefined list using the function resetERA5Variables().  Alternatively, if we only want to reset SingleLevel or PressureLevel variables, we can use resetSingles() or resetPressures().\n\nFor the resetERA5Variables() and resetSingles() functions, the allfiles keyword will reset the list of SingleVariable variables as well, instead of just the list of SingleCustom variables.","category":"section"},{"location":"components/variables/reset.html#ERA5Reanalysis.resetSingles","page":"Resetting ERA5 Variables","title":"ERA5Reanalysis.resetSingles","text":"resetSingles( allfiles :: Bool ) -> nothing\n\nReset the list of Single-Level variables.\n\nArguments\n\nallfiles : If false, only get rid of all the SingleCustom variables, but if true, then the SingleVariable list will be reset back to the default for ERA5Reanalysis.jl\n\n\n\n\n\n","category":"function"},{"location":"components/variables/reset.html#ERA5Reanalysis.resetPressures","page":"Resetting ERA5 Variables","title":"ERA5Reanalysis.resetPressures","text":"resetPressures() -> nothing\n\nReset the list of Pressure-Level variables to the ERA5Reanalysis default.\n\n\n\n\n\n","category":"function"},{"location":"using/landsea/intro.html#Land-Sea-Mask-Datasets","page":"What is a LandSea Dataset","title":"Land-Sea Mask Datasets","text":"Similar to ETOPO 2022, NASA also provides global land-sea masks at the same resolution as the IMERG and TRMM datasets.  NASAPrecipitation.jl - in a manner similar to GeoRegions.jl for ETOPO 2022 data - is able to retrieve the land-sea mask datasets provided by NASA that allows for us to easily distinguish between precipitation data points over land and over the ocean.\n\nThis land-sea mask is then saved into a LandSea data type, which is defined to be a subType of the LandSeaFlat abstract type in GeoRegions.jl.\n\ninfo: Units for the Land-Sea Mask\nFor standardization purposes, NASAPrecipitation.jl converts the land-sea mask provided by NASA to the same units as the LandSea Dataset provided by GeoRegions.jl0 represents fully ocean, while 1 represents fully land.See the figure below:(Image: landseamaskunits)","category":"section"},{"location":"components/regions/gridded.html#Extract-Gridded-Information-for-an-ERA5Region","page":"Extracting Data for an ERA5Region","title":"Extract Gridded Information for an ERA5Region","text":"Let's say that we have data on a rectilinear lon-lat grid, as ERA5 data tends to have.  How do we extract the data for the relevant region?  How do we do this for regions that are non-rectilinear in shape?  To solve these problems, we introduce the RegionGrid type, which contains information that:\n\nallows for the extraction of data for a subregion from a parent, larger region\nis able to use a mask to extract data for a region's shape, if it is not rectilinear","category":"section"},{"location":"components/regions/gridded.html#RegionGrids.RegionGrid-Tuple{ERA5Region, Vector{<:Real}, Vector{<:Real}}","page":"Extracting Data for an ERA5Region","title":"RegionGrids.RegionGrid","text":"RegionGrid(\n    e5geo :: ERA5Region{ST,FT},\n    lon   :: Vector{<:Real},\n    lat   :: Vector{<:Real}\n) -> GeoRegion.RegionGrid\n\nCreates a RegionGrid containing information and mask information required to extract regional data for the ERA5Region from the raw data.\n\nArguments\n\ne5geo : A ERA5Region struct type\nlon   : A vector containing the longitude points\nlat   : A vector containing the latitude points\n\n\n\n\n\n","category":"method"},{"location":"components/datasets/overview.html#An-Overview-of-ERA5-Reanalysis-Datasets","page":"An Overview of ERA5 Datasets","title":"An Overview of ERA5 Reanalysis Datasets","text":"An ERA5 Dataset is defined to be a module containing ERA5 Reanalysis data from the Climate Data Store, and is to distinguish between datasets with differing time-resolution, from hourly to monthly.\n\nERA5 reanalysis data is stored on the Climate Data Store in several different categories, so different people with different needs may access different data types depending on their research.  In ERA5Reanalysis, we defined these datasets as ERA5Dataset Types.\n\nWhen defining an ERA5Dataset container, we also indicate the start and end dates of the dataset that we want to work on.","category":"section"},{"location":"components/datasets/overview.html#ERA5Reanalysis.ERA5Dataset","page":"An Overview of ERA5 Datasets","title":"ERA5Reanalysis.ERA5Dataset","text":"ERA5Dataset\n\nAbstract supertype for ERA5 reanalysis datasets, with the following subtypes:\n\nERA5CDStore <: ERA5Dataset\nERA5Custom  <: ERA5Dataset\nERA5Dummy   <: ERA5Dataset\n\nAll ERA5Dataset Types contain the following fields:\n\npath : The specified directory in which to save the data\nemask : The specified directory in which to save the LandSea dataset\n\nAll ERA5CDStore and ERA5Custom Types also contain the following additional fields:\n\nID : The module ID, that also acts as a prefix to filenames\nname : The full name of the module\nstart : The date for which downloads/analysis begins\nstop : The date for which downloads/analysis finishes\nsldoi : Single-Level DOI (N/A for ERA5Daily)\npldoi : Pressure-Level DOI (N/A for ERA5Daily)\nptype : Product type (N/A for ERA5Daily), set to reanalysis\n\n\n\n\n\n","category":"type"},{"location":"components/overview.html#The-Different-Components-of-ERA5Reanalysis.jl","page":"Overview","title":"The Different Components of ERA5Reanalysis.jl","text":"Text","category":"section"},{"location":"components/datasets/custom.html#Custom-ERA5-Datasets-defined-in-ERA5Reanalysis.jl","page":"Custom ERA5 Datasets","title":"Custom ERA5 Datasets defined in ERA5Reanalysis.jl","text":"We also have created a custom ERA5Daily dataset, which is a daily-average of the hourly data from ERA5Hourly data.\n\nIn order to create the ERA5 daily datasets from an ERA5Hourly dataset, use the hour2day function as below:\n\nusing ERA5Reanalysis\ne5ds = ERA5Hourly(start=Date(2015),stop=Date(2015),path=datadir())\nevar = SingleVariable(\"t2m\")\negeo = GeoRegion(\"TRP\")\nhourly2daily(e5ds,evar,egeo)","category":"section"},{"location":"components/datasets/custom.html#API","page":"Custom ERA5 Datasets","title":"API","text":"","category":"section"},{"location":"components/datasets/custom.html#ERA5Reanalysis.ERA5Daily","page":"Custom ERA5 Datasets","title":"ERA5Reanalysis.ERA5Daily","text":"ERA5Daily <: ERA5Custom\n\nSpecifies that the dataset to be analyzed contains hourly data.  All fields are the same as that specified in the ERA5Dataset docstring.  However, the fields sldoi, pldoi and ptype are all set to N/A because ERA5Daily is not available in, nor downloadable from, the Climate Data Store.\n\n\n\n\n\n","category":"type"},{"location":"components/datasets/custom.html#ERA5Reanalysis.ERA5Daily-Tuple{}","page":"Custom ERA5 Datasets","title":"ERA5Reanalysis.ERA5Daily","text":"ERA5Daily(;\n    start :: TimeType,\n    stop  :: TimeType,\n    path  :: AbstractString = homedir(),\n) -> ERA5Daily <: ERA5Dataset\n\nA function that creates an ERA5Hourly module.  All possible hours are downloaded, and data is saved month-by-month.\n\nKeyword Arguments\n\npath : The specified directory in which to save the data\nstart : The date for which downloads/analysis begins, automatically rounded to the nearest month\nstop : The date for which downloads/analysis finishes, automatically rounded to the nearest month\n\n\n\n\n\n","category":"method"},{"location":"components/datasets/cds.html#ERA5-Datasets-available-in-CDS","page":"Climate Data Store Datasets","title":"ERA5 Datasets available in CDS","text":"The ERA5CDStore Type of the parent type of all ERA5 Datasets that are naturally available from the Climate Data Store and can thus be downloaded directly using the CDSAPI.\n\nnote: Note\nThe Climate Data Store also has an option to download ERA5 Monthly data by hour-of-day. This is subsumed into the ERA5Monthly dataset and can be selected by specifying hours = true.\n\nThere are other potential modules that could be incorporated into ERA5Reanalysis.jl, such as\n\nERA5-Land data\nEnsemble model averages, individual members, and standard deviations\n\nThey have not been added yet into ERA5Reanalysis.jl. If you are potentially interested in me adding these datasets to ERA5Reanalysis.jl, please submit a pull request.","category":"section"},{"location":"components/datasets/cds.html#API","page":"Climate Data Store Datasets","title":"API","text":"","category":"section"},{"location":"components/datasets/cds.html#ERA5Reanalysis.ERA5Hourly","page":"Climate Data Store Datasets","title":"ERA5Reanalysis.ERA5Hourly","text":"ERA5Hourly <: ERA5CDStore\n\nSpecifies that the dataset to be analyzed contains hourly data.  All fields are the same as that specified in the ERA5Dataset docstring.\n\n\n\n\n\n","category":"type"},{"location":"components/datasets/cds.html#ERA5Reanalysis.ERA5Monthly","page":"Climate Data Store Datasets","title":"ERA5Reanalysis.ERA5Monthly","text":"ERA5Monthly <: ERA5CDStore\n\nSpecifies that the dataset to be analyzed contains monthly-mean data.  The ERA5Monthly Type will also contain the following fields:\n\nhours : specifies the hour(s) of day for which monthly data is downloaded\n\n\n\n\n\n","category":"type"},{"location":"components/datasets/cds.html#ERA5Reanalysis.ERA5Hourly-Tuple{}","page":"Climate Data Store Datasets","title":"ERA5Reanalysis.ERA5Hourly","text":"ERA5Hourly(;\n    start :: TimeType,\n    stop  :: TimeType,\n    path  :: AbstractString = homedir(),\n) -> ERA5Hourly <: ERA5Dataset\n\nA function that creates an ERA5Hourly module.  All possible hours are downloaded, and data is saved month-by-month.\n\nKeyword Arguments\n\npath : The specified directory in which to save the data\nstart : The date for which downloads/analysis begins, automatically rounded to the nearest month\nstop : The date for which downloads/analysis finishes, automatically rounded to the nearest month\n\n\n\n\n\n","category":"method"},{"location":"components/datasets/cds.html#ERA5Reanalysis.ERA5Monthly-Tuple{}","page":"Climate Data Store Datasets","title":"ERA5Reanalysis.ERA5Monthly","text":"ERA5Monthly(;\n    start :: TimeType,\n    stop  :: TimeType,\n    path  :: AbstractString = homedir(),\n    hours :: Bool = false,\n) -> ERA5Monthly <: ERA5Dataset or ERA5MonthlyHour <: ERA5Dataset\n\nA function that creates an ERA5Monthly or ERA5MonthlyHour module depending on the input arguments of hours.  Data is saved year-by-year.\n\nKeyword Arguments\n\npath : The specified directory in which to save the data\nstart : The date for which downloads/analysis begins, automatically rounded to the nearest year\nstop : The date for which downloads/analysis finishes, automatically rounded to the nearest year\nhours : If false, download monthly-averaged data. If true, download monthly-averaged data for each hour\n\n\n\n\n\n","category":"method"},{"location":"components/variables/read.html#Reading-in-Pre-existing-ERA5Variable-Information","page":"Retrieving Existing ERA5 Variables","title":"Reading in Pre-existing ERA5Variable Information","text":"In order to familiarize ourselves with using ERA5Variables, we load some of the pre-existing variables that are prepackaged with ERA5Reanalysis.jl.","category":"section"},{"location":"components/variables/read.html#Loading-Single-Level-Variable-Information","page":"Retrieving Existing ERA5 Variables","title":"Loading Single-Level Variable Information","text":"The easiest example is to load a single-level variable using the SingleVariable() function, for example the u-component of wind 100m above the surface:\n\nnote: Note\nAs of v0.3 and above, all Single-Level variables available in the CDS are available by default in ERA5Reanalysis.jl.\n\nusing ERA5Reanalysis\nSingleVariable(\"u100\")","category":"section"},{"location":"components/variables/read.html#Loading-Pressure-Level-Variable-Information","page":"Retrieving Existing ERA5 Variables","title":"Loading Pressure-Level Variable Information","text":"Loading pressure-level variables using the PressureVariable() function is similar overall.  However, an additional argument hPa is needed to specify the pressure-levels in question.  By default hPa = 0 refers to all available pressure-levels.  However, if the input for hPa is not a valid ERA5 pressure-level in CDS, then throw determines if an error is thrown, or if the nearest pressure level will be used instead.\n\nusing ERA5Reanalysis\nPressureVariable(\"cc\",hPa=1000)\nPressureVariable(\"cc\",hPa=890)\nPressureVariable(\"cc\",hPa=890,throw=false)","category":"section"},{"location":"components/variables/read.html#Valid-ERA5-Pressure-Levels-in-CDS","page":"Retrieving Existing ERA5 Variables","title":"Valid ERA5 Pressure-Levels in CDS","text":"A list of valid ERA5 pressure-levels available directly from CDS can be retrieved using the function era5Pressures\n\nusing ERA5Reanalysis\nera5Pressures()","category":"section"},{"location":"components/variables/read.html#Does-the-ERA5Variable-exist?","page":"Retrieving Existing ERA5 Variables","title":"Does the ERA5Variable exist?","text":"If we want to check if the ERA5Variable exists, we use either the isSingle() or isPressure functions.  \n\nnote: Note\nThere is no generic isERA5Variable function, because some pressure-level variables and single-level variables on the CDS have the same identifier (e.g. Total Cloud Cover, and Cloud Cover Fraction, both of which use the identifer cc).\n\nusing ERA5Reanalysis\nisSingle(\"tcwv\")","category":"section"},{"location":"components/variables/read.html#ERA5Reanalysis.SingleVariable","page":"Retrieving Existing ERA5 Variables","title":"ERA5Reanalysis.SingleVariable","text":"SingleVariable(\n    ID :: AbstractString,\n    ST = String,\n) -> evar :: SingleLevel\n\nRetrieve the basic properties of the Single-Level variable defined by ID and put them in the evar SingleLevel type structure.\n\nArguments\n\nID : variable ID (in string format) used in the NetCDF file\n\n\n\n\n\n","category":"type"},{"location":"components/variables/read.html#ERA5Reanalysis.PressureVariable","page":"Retrieving Existing ERA5 Variables","title":"ERA5Reanalysis.PressureVariable","text":"PressureVariable(\n    ID :: AbstractString,\n    ST = String;\n    hPa   :: Int = 0\n    throw :: Bool = true\n) -> evar :: SingleLevel\n\nRetrieve the basic properties of the Pressure-Level variable defined by ID at pressure-height indicated by hPa and put them in the evar SingleLevel type structure.\n\nArguments\n\nID : variable ID (in string format) used in the NetCDF file\n\nKeyword Arguments\n\nhPa : Integer specifying pressure-level height in hPa\nthrow : if hPa level does not exist and throw is true, throw error, otherwise find nearest pressure level\n\n\n\n\n\n","category":"type"},{"location":"components/variables/read.html#ERA5Reanalysis.era5Pressures-Tuple{}","page":"Retrieving Existing ERA5 Variables","title":"ERA5Reanalysis.era5Pressures","text":"era5Pressures() -> parray :: Vector{Int}\n\nReturns the a vector containing the 37 pressure levels available in ERA5 in hPa units.\n\nReturns\n\nparray : vector containing list of pressures in Int format and hPa units\n\n\n\n\n\n","category":"method"},{"location":"components/variables/custom.html#Creating-Custom-ERA5Variables","page":"Creating Custom ERA5 Variables","title":"Creating Custom ERA5Variables","text":"While the list of available ERA5Variables in the Climate Data Store is very extensive, they are not exhaustive.  There is therefore a need to define a list of custom ERA5Variables that will be otherwise calculated (although this has to be done separately outside of ERA5Reanalysis.jl), and then can thus be saved and manipulated and analyzed in the same way that the default ERA5Variables in ERA5Reanalysis.jl can be.  In this page, we break this down into the SingleLevel and PressureLevel components","category":"section"},{"location":"components/variables/custom.html#Custom-SingleLevel-Variables","page":"Creating Custom ERA5 Variables","title":"Custom SingleLevel Variables","text":"As of ERA5Reanalysis.jl v0.3, we have predefined all the single-level variables that are available directly from the CDS.  As such, all custom SingleLevel variables are defined under the SingleCustom type.\n\ncompat: ERA5Reanalysis ≧ v0.3\nAll Single-Level variables defined in the Climate Data Store are now available in ERA5Reanalysis.jl, but only for versions ≧ v0.3.","category":"section"},{"location":"components/variables/custom.html#Defining-a-new-SingleCustom-variable","page":"Creating Custom ERA5 Variables","title":"Defining a new SingleCustom variable","text":"To define aSingleCustom variables, we use the funciton SingleVariable().","category":"section"},{"location":"components/variables/custom.html#Removing-Custom-SingleLevel-Variables","page":"Creating Custom ERA5 Variables","title":"Removing Custom SingleLevel Variables","text":"To remove a SingleCustom variable, we can use the rmSingle() function:","category":"section"},{"location":"components/variables/custom.html#An-Example!","page":"Creating Custom ERA5 Variables","title":"An Example!","text":"In this example, we add a SingleLevel variable to the list:\n\neke, for Eddy Kinetic Energy, which is not downloadable and must be calculated using other variables\n\nThe Eddy Kinetic Energy is calculated by the following:\n\nE = frac12g int_0^p_s overlineu^2 + overlinev^2 dp\n\nAnd it is often used as a measure of storm-track intensity.\n\nusing ERA5Reanalysis\nSingleVariable(\n    ID = \"eke\",\n    units = \"J m**-2\",\n    name = \"Eddy Kinetic Energy\",\n    long = \"eddy_kinetic_energy\"\n)\ntableSingles(custom=true)\nrmSingle(\"eke\")\nisSingle(\"eke\",throw=false) # don't throw error, just show warning","category":"section"},{"location":"components/variables/custom.html#Custom-PressureLevel-variables","page":"Creating Custom ERA5 Variables","title":"Custom PressureLevel variables","text":"In ERA5Reanalysis.jl, we have predefined all the pressure-level variables that are available directly from the CDS.  As such, all custom PressureLevel variables are defined under the PressureCustom type.","category":"section"},{"location":"components/variables/custom.html#Defining-Custom-PressureLevel-Variables","page":"Creating Custom ERA5 Variables","title":"Defining Custom PressureLevel Variables","text":"PressureCustom variables are defined using the PressureVariable() function, as follows:","category":"section"},{"location":"components/variables/custom.html#Removing-Custom-PressureLevel-Variables","page":"Creating Custom ERA5 Variables","title":"Removing Custom PressureLevel Variables","text":"To remove a PressureCustom variable, we can use the rmPressure() function:","category":"section"},{"location":"components/variables/custom.html#An-Example!-2","page":"Creating Custom ERA5 Variables","title":"An Example!","text":"Let us define the custom variable \"vt\" for Virtual Temperature, which is a proxy to buoyancy in the atmosphere.  Virtual Temperature is calculated from both the water vapour mixing ratio and atmospheric temperature and is given by the formula:\n\nT_v = T(1+061q)\n\nVirtual Temperature has the units \"K\", and for this example let us define the pressure level height we are interested in to be at 1000 hPa.  The resultant PressureCustom variable is given by:\n\nusing ERA5Reanalysis\nPressureVariable(\n    ID = \"vt\",\n    units = \"K\",\n    hPa   = 1000,\n    long = \"virtual_temperature\",\n    name = \"Virtual Temperature\"\n)\ntablePressures()\nrmPressure(\"vt\")\nisPressure(\"vt\",throw=false) # don't throw error, just show warning","category":"section"},{"location":"components/variables/custom.html#ERA5Reanalysis.SingleVariable","page":"Creating Custom ERA5 Variables","title":"ERA5Reanalysis.SingleVariable","text":"SingleVariable(\n    ST = String;\n    ID :: AbstractString,\n    long :: AbstractString = \"\",\n    name :: AbstractString,\n    units :: AbstractString\n) -> evar :: SingleLevel\n\nCreate a custom Single-Level variable that is not in the default list exported by ERA5Reanalysis.jl.  These variables are not available in the CDS store, and so they must be separately calculated from other variables and analyzed.\n\nKeyword Arguments\n\nID : variable ID (in string format) used in the NetCDF file\nlong : long-name for variable (used in specifying variable for CDS downloads)\nname : user-defined variable name\nunits : user-defined units of the variable\ninCDS : Boolean that indicates if this variable is available on the CDS store.  True if available.\n\n\n\n\n\n","category":"type"},{"location":"components/variables/custom.html#ERA5Reanalysis.PressureVariable","page":"Creating Custom ERA5 Variables","title":"ERA5Reanalysis.PressureVariable","text":"PressureVariable(\n    ST = String;\n    ID :: AbstractString,\n    long :: AbstractString = \"\",\n    name :: AbstractString,\n    units :: AbstractString,\n    hPa   :: Int = 0,\n    throw :: Bool = true\n) -> evar :: PressureCustom\n\nCreate a custom Pressure-Level variable that is not in the default list exported by ERA5Reanalysis.jl.  These variables are not available in the CDS store, and so they must be separately calculated from other variables and analyzed.\n\nKeyword Arguments\n\nID : variable ID (in string format) used in the NetCDF file\nlong : long-name for variable (used in specifying variable for CDS downloads)\nname : user-defined variable name\nunits : user-defined units of the variable\nhPa   : Pressure level specified in hPa. Default is 0, which indicates all levels.\nthrow : if hPa level does not exist and throw is true, throw error, otherwise find nearest pressure level\n\n\n\n\n\n","category":"type"},{"location":"components/regions/isin.html#Are-Points-/-GeoRegions-in-an-ERA5Region?","page":"Is it in an ERA5Region","title":"Are Points / GeoRegions in an ERA5Region?","text":"When dealing with geographic data, we often wish to check if a point or region is inside another region.  In ERA5Reanalysis, we build upon the functionality of GeoRegions.jl with the wrapper isinERA5Region(), so you can perform this check easily without needing to perform and extra step and extract the GeoRegion from the ERA5Region.\n\nnote: Point Type\nWe use the Point2 Type from the package GeometryBasics.jl, which is reexported by ERA5Reanalysis.jl, as an easy way to denote points.  This also allows us to use the package PolygonOps.jl to determine if a point is inside a region.","category":"section"},{"location":"components/regions/isin.html#ERA5Reanalysis.isinERA5Region","page":"Is it in an ERA5Region","title":"ERA5Reanalysis.isinERA5Region","text":"isinERA5Region(\n    point :: Point2{<:Real},\n    e5geo :: ERA5Region;\n    tlon  :: Real = 0,\n    tlat  :: Real = 0,\n    throw :: Bool = true\n) -> Bool\n\nCheck if a geographical point Point is within an ERA5Region defined by e5geo.\n\nArguments\n\npoint : A geographical point of Type Point2.  Pass Point2(plon,plat), where plon and plat are the longitude and latitudes of the point.\ne5geo : The ERA5Region struct container\n\nKeyword Arguments\n\ntlon  : Threshold for the longitude bound\ntlat  : Threshold for the latitude bound\nthrow : If true, then if Point is not within geo, an error is thrown and the program stops running.\n\n\n\n\n\nisinERA5Region(\n    geo    :: GeoRegion,\n    e5geo  :: ERA5Region;\n    domask :: Bool = false,\n    throw  :: Bool = true\n) -> Bool\n\nCheck if a child GeoRegion defined by geo is within a ERA5Region e5geo.\n\nArguments\n\ngeo   : A GeoRegion that we postulate to be a \"child\", or a subset of the ERA5Region defined by e5geo\ne5geo : An ERA5Region that we postulate to be a \"parent\", or containing the GeoRegion defined by geo\n\nKeyword Arguments\n\nthrow  : If true, then if geo is not within e5geo, an error is thrown and the program stops running\ndomask : If throw is false and domask is true, return a mask (with bounds defined by the geo GeoRegion) showing the region where geo and e5geo do not overlap\n\n\n\n\n\n","category":"function"},{"location":"index.html#[ERA5Reanalysis.jl](https://github.com/natgeo-wong/ERA5Reanalysis.jl)","page":"Home","title":"ERA5Reanalysis.jl","text":"Managing ERA5 Reanalysis Datasets\n\nERA5Reanalysis.jl is a Julia package that aims to streamline the following processes:\n\ndownloads of ERA5 Datasets from the Climate Data Store (does not include MARS requests)\nbasic analysis of said datasets\nperform all the above operations innately over a given geographical region using the GeoRegion functionality of GeoRegions.jl (v2 and above)","category":"section"},{"location":"index.html#Installation-Instructions","page":"Home","title":"Installation Instructions","text":"ERA5Reanalysis.jl has not been officially registered as a Julia package yet.  To install it, add it directly using the GitHub link as follows:\n\njulia> ]\n(@v1.6) pkg> add https://github.com/natgeo-wong/ERA5Reanalysis.jl.git","category":"section"},{"location":"index.html#The-Basic-Components-of-ERA5Reanalysis.jl","page":"Home","title":"The Basic Components of ERA5Reanalysis.jl","text":"There are three essential components to specifying an ERA5 reanalysis dataset:\n\nThe ERA5 dataset (hourly, monthly, month-by-hour, etc.), held in an ERA5Dataset supertype\nThe ERA5 variable (single-level, or pressure-level), held in the ERA5Variable supertype\nThe ERA5 region to be downloaded/analyzed, held in an ERA5Region supertype, built over a GeoRegion","category":"section"},{"location":"index.html#Documentation-Overview","page":"Home","title":"Documentation Overview","text":"The documentation for ERA5Reanalysis.jl is divided into three components:\n\nTutorials - meant to introduce the three key components of ERA5Reanalysis.jl:  (a) ERA5Dataset Types that specify the ERA5 Dataset of interest  (b) ERA5Variable Types that specifiy the Single- and Pressure-level Variables of interest  (c) ERA5Region Type that specifies the Geographic Regions of interest\nHow-to Examples - geared towards those looking for specific examples of what can be done\nAPI Reference - comprehensive summary of all exported functionalities\n\ntip: Obtaining Example Datasets\nAll the output for the coding examples were produced using my computer with key security information (such as login info) omitted.  The examples cannot be run online because the file size requirements are too big.  Copying and pasting the code examples (with relevant directory and login information changes) should produce the same results.","category":"section"},{"location":"index.html#Getting-help","page":"Home","title":"Getting help","text":"If you are interested in using ERA5Reanalysis.jl or are trying to figure out how to use it, please feel free to ask me questions and get in touch!  Please feel free to open an issue if you have any questions, comments, suggestions, etc!","category":"section"},{"location":"using/landsea/create.html#Loading-and-Saving-Land-Sea-Mask-Datasets","page":"Downloading LandSea Datasets","title":"Loading and Saving Land-Sea Mask Datasets","text":"The Land-Sea Dataset can be obtained using the function getLandSea().  See end of the page for the API","category":"section"},{"location":"using/landsea/create.html#Setup","page":"Downloading LandSea Datasets","title":"Setup","text":"using ERA5Reanalysis\nusing DelimitedFiles\nusing CairoMakie\n\ndownload(\"https://raw.githubusercontent.com/natgeo-wong/GeoPlottingData/main/coastline_resl.txt\",\"coast.cst\")\ncoast = readdlm(\"coast.cst\",comments=true)\nclon  = coast[:,1]\nclat  = coast[:,2]\nnothing","category":"section"},{"location":"using/landsea/create.html#Retrieving-IMERG-and-TRMM-Land-Sea-Mask-over-Java","page":"Downloading LandSea Datasets","title":"Retrieving IMERG and TRMM Land-Sea Mask over Java","text":"First, we must define the ERA5 datasets, and the GeoRegion of interest.\n\ne5ds = ERA5Dummy()\ngeo  = RectRegion(\"JAV\",\"GLB\",\"Java\",[-5.5,-9,115,105],save=false)\negeo = ERA5Region(geo)\n\nThen, we retrieve the ERA5 Reanalysis LandSea Dataset <!– ````@example landseamask","category":"section"},{"location":"using/landsea/create.html#lsd-getLandSea(e5ds,egeo)","page":"Downloading LandSea Datasets","title":"lsd = getLandSea(e5ds,egeo)","text":"```` –>\n\nAnd we plot them below for comparison:","category":"section"},{"location":"using/landsea/create.html#API","page":"Downloading LandSea Datasets","title":"API","text":"","category":"section"},{"location":"components/datasets/dummy.html#Dummy-ERA5-Datasets","page":"Dummy ERA5 Datasets","title":"Dummy ERA5 Datasets","text":"Dummy datasets are meant to specify the paths to the ERA5 data root directory, and LandSea folder, without needing inputs for date.\n\nusing ERA5Reanalysis\ne5ds = ERA5Dummy(path=homedir())\nisdir(e5ds.emask)","category":"section"},{"location":"components/datasets/dummy.html#API","page":"Dummy ERA5 Datasets","title":"API","text":"","category":"section"},{"location":"components/datasets/dummy.html#ERA5Reanalysis.ERA5Dummy","page":"Dummy ERA5 Datasets","title":"ERA5Reanalysis.ERA5Dummy","text":"ERA5Dummy <: ERA5Dataset\n\nThe ERA5Dummy dataset contains only information on the data and mask paths.\n\n\n\n\n\n","category":"type"},{"location":"components/datasets/dummy.html#ERA5Reanalysis.ERA5Dummy-Tuple{}","page":"Dummy ERA5 Datasets","title":"ERA5Reanalysis.ERA5Dummy","text":"ERA5Dummy(;\n    path  :: AbstractString = homedir(),\n) -> ERA5Dummy <: ERA5Dataset\n\nA function that creates a dummy ERA5Dataset that contains only information on the path of the ERA5 LandSea mask\n\nKeyword Arguments\n\npath : The specified directory in which to save the data\n\n\n\n\n\n","category":"method"}]
}
